var callbacks = $.Callbacks();callbacks.add( get_api_results );callbacks.fire();var labels = [];var values = [];function get_api_results() {  var world_pop = "https://www.quandl.com/api/v1/datasets/UGID/POPTOT_5001.json?trim_start=2009-12-31&trim_end=2100-01-01";  $.getJSON(world_pop, function(data){    //labels = data.column_names;    var series = data.data.reverse();    var items = [];    $.each( series, function( key, val ) {      items.push( "<li id='" + key + "'>" + val + "</li>" );      labels.push(val[0]);      values.push(val[1]);    });    populate_chart();    alert(JSON.stringify(labels));    $( "<ul/>", {      "class": "my-new-list",      html: items.join( "" )    }).appendTo( "body" );  });}function populate_chart() {  var data = {      labels: labels,      series: [        {          name: "Const. Mortality (Medium)",          data: values        }      ]  };  new Chartist.Line('.ct-chart', data);  var $chart = $('.ct-chart');  var $toolTip = $chart    .append('<div class="tooltip"></div>')    .find('.tooltip')    .hide();  $chart.on('mouseenter', '.ct-point', function() {    var $point = $(this),      value = $point.attr('ct:value'),      seriesName = $point.parent().attr('ct:series-name');    $toolTip.html(seriesName + '<br>' + value).show();  });  $chart.on('mouseleave', '.ct-point', function() {    $toolTip.hide();  });  $chart.on('mousemove', function(event) {    $toolTip.css({      left: (event.offsetX || event.originalEvent.layerX) - $toolTip.width() / 2 - 10,      top: (event.offsetY || event.originalEvent.layerY) - $toolTip.height() - 40    });  });}